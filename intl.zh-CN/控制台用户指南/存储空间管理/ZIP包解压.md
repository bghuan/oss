# ZIP包解压

对象存储OSS提供ZIP文件自动解压功能，开启此功能后，您上传到OSS的ZIP文件都会被自动解压。

ZIP包解压需要结合函数计算来共同完成，目前只对ZIP后缀的文件进行处理，解压流程如下图。

![](https://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/zh-CN/7594459951/p38103.png)

ZIP文件在上传至OSS的指定目录之后，会自动触发函数，对上传的文件进行解压。文件解压完成后，会存储至OSS的指定目录中。

## 注意事项

使用ZIP包解压功能时需注意以下事项：

-   除华南2（河源）、西南1（成都）、中国（香港）、马来西亚（吉隆坡）、阿联酋（迪拜）、英国（伦敦）外，其他地域均已支持ZIP包解压。
-   建议使用UTF-8或GB 2312编码命名您的文件或文件夹，否则会导致解压后的文件或文件夹名称出现乱码、解压过程中断等情况。
-   归档或冷归档类型的文件需先解冻再解压。
-   ZIP包解压功能解压单个压缩包的最大时间是10分钟，超过10分钟未完成的任务会解压失败。
-   ZIP包解压功能是增值服务，在解压过程中，函数计算会根据解压执行时间计算费用，详情请参见[计费方式](https://www.alibabacloud.com/help/zh/doc-detail/54301.htm)。

## 操作步骤

1.  登录[OSS管理控制台](https://oss.console.aliyun.com/)。

2.  单击**Bucket列表**，之后单击目标Bucket名称。

3.  单击**数据处理** \> **ZIP包解压**。

4.  单击**ZIP包解压**。

5.  在ZIP包解压面板，配置ZIP包解压信息。

    |参数|说明|
    |--|--|
    |**服务授权**|授予函数计算读写OSS和执行函数的权限，需要单击**点击授权**按钮进行授权后使用。|
    |**触发器授权**|授予OSS访问函数计算的权限。需要单击**点击授权**按钮进行授权后使用。若已完成授权，此项显示**触发器角色**。|
    |**前缀**|指定触发函数计算的文件前缀。配置前缀后，当您上传指定前缀的文件时会触发函数计算。例如您指定的前缀为abc，当您上传的文件以abc开头或将文件上传至abc/目录内时，会触发函数计算。 **说明：** 此项未配置，将默认匹配该Bucket下的全部ZIP文件，可能会触发循环执行，详情请参见[如何避免循环执行](https://www.alibabacloud.com/help/zh/doc-detail/181819.htm)。 |
    |**目标目录**|解压后的ZIP文件存放的目录，如果不设置，函数计算会将ZIP文件解压到当前Bucket的主目录下。|

6.  勾选**我已知晓并同意开通函数计算，通过函数计算处理压缩文件。压缩文件里面的文件名或文件夹名不支持非UTF-8或GB 2312编码**后，单击**确定**。


## 修改配置

当您设置ZIP包解压后，可随时更改ZIP包解压的配置。

1.  登录[OSS管理控制台](https://oss.console.aliyun.com/)。

2.  单击**Bucket列表**，之后单击目标Bucket名称。

3.  单击**数据处理** \> **ZIP包解压**。

4.  在触发器列表选择需要更改的条目，单击**编辑**。

    您可以根据您的需求修改配置：

    -   修改前缀
        1.  在弹出的**修改触发器**面板修改**触发规则**区域的**前缀**，其他参数建议保持默认。
        2.  单击**确定**。
    -   修改函数计算配置
        1.  直接单击**确定**。
        2.  在当前页面单击**概览** \> **配置**。
        3.  在弹出的**配置函数**页面优化函数计算的配置。

            您可以根据实际需求修改**函数执行内存**、**超时时间**、**环境变量**：

            -   **函数执行内存**：根据您处理的文件大小来选择，若您的ZIP文件较小，可以选择更小规格的函数执行内存来节省费用。
            -   **超时时间**：函数在规定时间内未能执行，函数计算会返回超时错误。建议配置合适的超时时间，避免函数执行超时。
            -   **环境变量**：修改此项的值会修改解压文件的目标目录。
        4.  单击**提交**。

## 删除配置

对于不需要的函数计算配置，您可以手动删除。

1.  登录[OSS管理控制台](https://oss.console.aliyun.com/)。

2.  单击**Bucket列表**，之后单击目标Bucket名称。

3.  单击**数据处理** \> **ZIP包解压**。

4.  在触发器列表选择需要删除的条目，单击**编辑**。

5.  在弹出的**修改触发器**面板单击**取消**。

6.  在触发器页签选中需要删除的条目，单击**删除**。

7.  在弹出的对话框单击**确认**。


